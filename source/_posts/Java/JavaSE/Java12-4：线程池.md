---
title: Java12-4：线程池
date: 2021-03-08 17:45:15
tags:
	- 并发编程
categories:
	- Java
	- JavaSE
fileName: Java12-thread-pool
---

## 线程池简介

并发的本质其实就是任务的并行处理，所以绝大部分并发程序都是围绕离散任务进行的

1. 线程创建需要消耗资源。通过前面的学习，我们知道线程的创建和启动都需要消耗资源，需要 JVM 和操作系统提供支持。如果线程运行的任务十分轻量级，那么会造成创建线程的时间开销比任务逻辑运行时间还要长；
2. CPU 性能有限。当活跃的线程超过了 CPU 的承载限度，那么会有大量线程参与竞争 CPU，造成系统额外的开销，但是永远都会有很多线程无法竞争到 CPU，造成了资源的浪费；
3. 系统能够支持的线程存在上限。如果超出上限，整个应用就会崩溃。



## 

线程池的作用是维护一定数量的线程，接收任意数量的任务，这些任务被线程池中的线程并发执行

## 线程池设计与实现

### 基本思路

维护一个任务队列 `RunnableTaskQueue ` 用以接收 `Runnable `任务，其中任务一旦被线程池取完，则调用 `wait` 方法进入阻塞状态，而一旦有新的任务被添加进来，则

创建固定数量的线程作为线程池，不断的从 `RunnableTaskQueue ` 中取得 `Runnable` 并调用其 `run`方法





## Executor 线程池框架

