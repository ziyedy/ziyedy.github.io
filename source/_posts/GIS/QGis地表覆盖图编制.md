---
title: QGis地表覆盖图编制
date: 2020-01-07 16:43:34
tags:
	- QGis
categories:
	- GIS
fileName: qgis-Surface-coverage-mapping
---

## 数据采集

### 图像配准与提取

没有精确的图像配准，后续对数据的判读及精确的矢量化便无从谈起，将影像投影设置为与DLTB图层一致之后，便可按如下步骤在QGIS中完成相应的工作。 

1、右键菜单栏加载出对应的菜单，并且在插件菜单栏中调出默认安装了的GDAL配准插件， 并且将相应的影像数据等加入建立好的工程。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%871.png" style="zoom:67%;" />

2、打开配准工具，将要进行操作的影像图导入，之后根据地图地名等信息使得DLTB图层上相应点与影像上的点一一对应，选择四个点及以上时完成配准，本次实验选点及配置如下图。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%872.png" style="zoom: 67%;" />

3、结束点对对应后，点击配准菜单栏上的“开始配准”并完成配准，得到一个配准完成后的影像图层。效果如下所示。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%873.png" style="zoom:67%;" />

4、配准完成后在菜单栏“栅格”中选择“提取”下的“按掩膜图层裁剪栅格”，并将无数据区透明度设置为0，此举使得影像数据与DLTB数据基本重合，便于后续操作 

### 空缺数据补充

在使用原始的DLTB数据时，根据“核对修改范围”数据的提示，可以很清楚的看到其中间部分有一空缺处，而根据3.1.1处理好的结果，对DLTB数据在“符号化”中进行分类， 如下图。并在分类的基础上根据影像图进行地图矢量化，并按照影像图对其相关字段进行命名，从而完成空缺数据的补充（其中各矢量化工具的使用基本与ArcGIS中的相应工具类似，因此不再赘述）。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%874.png" style="zoom:50%;" />

### 其他数据的补充

除去DLTB空缺的数据，还应对居民地，相应公路等数据进行补充，与以上相比，矢量化工具由多边形变为了点和线，因此不再赘述，大致结果图如下

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%875.png" style="zoom: 67%;" />![](http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%876.png)



## 数据检查

一些基本的数据检查方法此处略，只对应QGis的相关操作。由于原始数据中编码相对较老，因此需要进行更新编码的操作，此处可以使用表连接方法

### 更改数据对应编码

在QGIS当中，本次具体的对应操作为建立一个相应的Excel表，在表中设置三列数据， 分别对应两类名称与对应的新编码，如下图所示。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%876.png" style="zoom:70%;" />



之后在属性中选择“连接”并选择相应Excel表的相应字段，具体见下图，连接完成后可见DLTB图层的属性表中多出了两条字段，分别对应新名称与新编号。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%877.png" style="zoom:50%;" />

最后将其导出为TDFG图层，按照新字段进行分类后（见下图），之后便以此为基础在TDFG图层上进行之后的符号化。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%878.png" style="zoom: 50%;" />

## 地图的编绘

完成了之前包括影像配准，数据对应整理与处理，空缺数据矢量化与补充，数据相应转化后，便可进入地图绘制的阶段，此阶段主要可概括为符号的使用与制作， 地图的整饰与制作两个阶段。 

### 符号的使用与制作

本次操作较为简单，在TDFG图层的分类下右击鼠标选中“编辑符号”，进入符号后更改填充颜色、线宽、点状符号、线状符号即可，如下图。由于相应符号老师都已给出，因此总体而言较为方便，唯一不便的地方就是得将CMYK转化为RGB再输入， 此过程本人使用AI得到。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%879.png" style="zoom:67%;" />

### 地图的整饰设计

本次实习所进行的地图整饰设计主要包括色带、图廓、方里网、图名、图例、比例尺等内容。进行整饰在QGIS中可在“项目”菜单中选择“新建打印布局”，之后在其中完成一系列相关操作即可。 

#### 色带

即图地图外部上的条带。本次实习色带是使用QGIS自带的轮廓功能制作的。具体步骤为在“矢量”菜单栏地学数据处理工具中选择“轮廓”，并选择相关数值， 对TDFG图层进行两次使用后，即可得到两个色带。 

#### 图廓

图廓相关在4.2总述中已经涉及了，页面即为外图廓，而内图廓即拖动地图使之与外图廓契合并能够很好显示地图即可。可使用左侧菜单栏中“选择/移动条目”与“移动条目内容”对其进行设置。

#### 方里网

方里网在地图的条目属性中添加网格，并更改并应用网格属性，设置如下图所示。 

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%8710.png" style="zoom:67%;" />

#### 图名

在菜单栏左侧使用相应工具添加图名，并更改其条目属性如下，再将其置于相应位置，本次为图面左上角。

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%8711.png" style="zoom:67%;" />

#### 图例

在菜单栏左侧使用相应工具添加图例，并设置其条目属性如下，并将图例置于右下角。

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%8712.png" style="zoom:67%;" />

#### 比例尺

在菜单栏左侧使用相应工具添加比例尺，并设置其条目属性如下，并将其置于图面右下角。

<img src="http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%8713.png" style="zoom: 67%;" />

## 成果图

![](http://cdn.ziyedy.top/image/QGis%E5%9C%B0%E8%A1%A8%E8%A6%86%E7%9B%96%E5%9B%BE%E7%BC%96%E5%88%B6/%E5%9B%BE%E7%89%8714.png)