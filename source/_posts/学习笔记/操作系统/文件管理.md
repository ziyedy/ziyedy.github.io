---
title: 文件管理
date: 2021-09-06 09:22:19
tags:
categories:
fileName: file
---





啊

提高文件传输的性能：减少用户态与内核态的上下文切换以及内存拷贝的次数



文件传输场景中，用户空间不会对数据再加工，因此不需要传入用户的缓冲区



内核缓冲区的数据拷贝到socket缓冲区



零拷贝技术：两次拷贝，DMA拷贝、直接拷贝到网卡



磁盘文件拷贝到内核缓冲区（PageCache）





我们都知道程序运⾏的时候，具有「局部性」，所以通常，刚被访问的数据在短时间内再次被访问的概率很⾼，于是我们可以⽤ PageCache 来缓存最近被访问的数据，当空间不⾜时淘汰最久未被访问的缓存

对于机械磁盘，使用了预读功能

PageCache：

* 缓存最近访问的数据
* 预读功能



大文件传输：在⾼并发的场景下，针对⼤⽂件的传输的⽅式，应该使⽤「异步 I/O + 直接 I/O」来替代零拷⻉技术
